<%= link_to disk, class: "block group" do %>
  <article class="card-retro overflow-hidden">
    <!-- Disk Cover / Vinyl Visual -->
    <div class="relative aspect-square overflow-hidden bg-vinyl-dark">
      <% if disk.respond_to?(:cover_image) && disk.cover_image.attached? %>
        <%= image_tag disk.cover_image, alt: disk.title, class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" %>
      <% else %>
        <!-- Default Vinyl Visual -->
        <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-vinyl-black via-vinyl-dark to-vinyl-groove">
          <div class="w-3/4 h-3/4 vinyl-record group-hover:vinyl-spin"></div>
        </div>
      <% end %>
      
      <!-- Format Badge -->
      <div class="absolute top-3 left-3">
        <span class="badge-retro bg-<%= disk.format == 'Vinilo' ? 'vinyl-black text-cream' : 'cream text-vinyl-black' %>">
          <%= disk.format %>
        </span>
      </div>
      
      <!-- State Badge -->
      <% if disk.state == 'Usado' %>
        <div class="absolute top-3 right-3">
          <span class="badge-retro bg-sepia text-cream">Usado</span>
        </div>
      <% end %>
    </div>
    
    <!-- Card Content -->
    <div class="p-4 bg-paper">
      <h3 class="font-display text-lg font-bold text-vinyl-black leading-tight mb-1 truncate group-hover:text-mustard-dark transition-colors">
        <%= disk.title %>
      </h3>
      
      <p class="text-sepia text-sm mb-3 truncate">
        <%= disk.artist %>
      </p>
      
      <div class="flex items-end justify-between">
        <div>
          <p class="font-display text-2xl font-bold text-vinyl-black">
            $<%= number_to_currency(disk.price, unit: '', delimiter: '.', separator: ',', precision: 0) %>
          </p>
        </div>
        
        <div class="text-right">
          <% if disk.stock > 0 %>
            <span class="text-teal text-xs font-bold uppercase tracking-wider">
              <%= disk.stock %> disp.
            </span>
          <% else %>
            <span class="text-rust text-xs font-bold uppercase tracking-wider">
              Agotado
            </span>
          <% end %>
        </div>
      </div>
      
      <!-- Year & Extra Info -->
      <div class="mt-3 pt-3 border-t-2 border-cream-dark flex items-center justify-between text-xs text-sepia">
        <span><%= disk.year %></span>
        <span class="uppercase tracking-wider"><%= disk.state %></span>
      </div>
    </div>
  </article>
<% end %>
